## １．apacheのインストール  
使用したコマンド  
sudo apt install apache2  

<img width="1125" height="601" alt="image" src="https://github.com/user-attachments/assets/fac8cf83-6f31-4240-9f33-e51f20613488" />  

ただ、インストールが上手くいかなかった。  

色々確認した結果、Ubuntu内のネットワーク接続が上手くいっていないことが分かった。  
設定の見直しや接続のつなぎ直し、ping等、様々なコマンドを入力したが変わらず…  
と思っていたがもしや？と思いUbuntu内のファイアウォールの設定を無効にしたら、  
無事に接続を再開することができた。  
<img width="730" height="113" alt="image" src="https://github.com/user-attachments/assets/77d3de3f-a2de-4c49-b080-11a284ebcfdf" />  

無事にインストールができている、そして2.4系のバージョンになっていることを確認、次に進む。  

## ２．自動起動の設定  

まずは起動するコマンド  
sudo systemctl start apache2  

そして状態確認のコマンド  
sudo systemctl status apache2  

この2つのコマンドを行い、無事にapacheが起動していることを確認(running)  

参考にしたWebサイト(https://ubuntu.perlzemi.com/blog/20200519084454.html)  

ここから、自動起動の設定  
使用したコマンド  
sudo systemctl enable apache2  

このコマンドを打ったことで、自動起動の欄がdisableからenableになり、  
Ubuntuが起動した時に自動的にapacheも起動することになる  
参考にしたWebサイト(https://www.miraiserver.ne.jp/column/about_ubuntu-apache/)  

## ３．VirtualHostの機能を利用し要件を満たす

  ・「こんにちは。ありがとう。」と表示させる
  
  ・「ありがとう。こんにちは。」と表示させる  

  VirtualHost＝1台のapacheサーバーで複数のWebサイトやドメインを同時に運用するための仕組み

  １　２つのWebサイトを格納するディレクトリを作成する  
  　コマンド  
    sudo mkdir -p /var/www/kawaguchi-hbtask.local  
    sudo mkdir -p /var.www/ryota-hbtask.local  
      オプションのpをつけることで、間のディレクトリが存在しなくても、まとめて自動的に作成することができる  

  ２　nano コマンドでconf（コンフィギュレーションファイル）を編集、作成する  
↓内容  
<img width="809" height="387" alt="image" src="https://github.com/user-attachments/assets/9170245f-e2df-485e-90ff-2d4f60a4a30b" />

　３　各ドメイン用のディレクトリにそれぞれのindex.htmlを用意する  
 　コマンド  
  sudo nano /var/www/kawaguchi-hbtask.local/index.html  
  sudo nano /var/www/ryota-hbtask.local/index.html  
  
↓内容  
  <img width="776" height="273" alt="image" src="https://github.com/user-attachments/assets/b3ce6258-671b-4b92-9d72-4ccf85b2fdc4" />
<img width="761" height="287" alt="image" src="https://github.com/user-attachments/assets/155444e4-9879-4b90-abb2-acb245e532f7" />

日本語入力への切り替え[windowsキー＋スペース]  
  
 ４　apache2の有効化（enable site)のコマンド入力  
 sudo a2ensite hb.conf  
 
参考にしたWebサイト  
(https://ittrip.xyz/apache/apache-virtualhost-setup)  
(https://ittrip.xyz/soft/linux/linux-network-name-resolution-guide)  

実際にサイトを開くことができた  
<img width="955" height="456" alt="image" src="https://github.com/user-attachments/assets/46ef4890-9600-4c6c-9e49-89696e45ade3" />  

<img width="1055" height="390" alt="image" src="https://github.com/user-attachments/assets/439547a0-8549-45b3-89ac-c86daeba5591" />
  

サイトと結びつけるのは、Webサイトを参考にすれば出来たのですが、ここで一つ苦労したこと↓  
・Webサイトを開いた時に表示される日本語「ありがとう。こんにちは。」が文字化けしてしまう  
豆腐文字と呼ばれているそうなのですが、これを直すための設定がとても苦労しました。  

実施したこと  
- html内に[ meta charset　の記載]
- Apacheから強制的にUTF-8を送る設定の定義
- ブラウザのフォント優先順位の変更
- フォントリストの確認、ダウンロード
  使用したコード
  fc-list :lang=ja
  sudo apt install -y fonts-takao
  sudo fc-cache -fv

ちなみに上記の「実施したこと」を全て実施しても直すことができませんでした。  
結果どう直したか↓  

1.日本語ロケールを設定する  
使用したコマンド  
sudo localectl set-locale LANG=ja_JP.UTF-8  

2.ファイアフォックス自体のインストールし直し(snap)  
使用したコマンド  
sudo snap remove firefox  
sudo snap install firefox  

この上記2点を実施した結果、なんとか課題の日本語表示を実現することが出来ました。  
参考にしたWebサイト(https://ichino-memo.com/ubuntu_garbled_firefox_correction/)  

## ４．次回試してみたいこと  
・今回は仮想マシンでWebブラウザを表示したが、ホストPCで同じようにWebサイトを表示する為には他になにが必要なのかを知り実践したい  
・httpのより安全なアクセス方法とされているhttpsとの違いを更に理解し、自分で設定できるようになりたい  

## ５．補足情報  
ここで、この課題とは関係がないのですが今回課題の最初で実施した、ファイアウォールの無効化を  
有効化にせずにここまで来てしまっていたので有効化します。  

また、本来すでに終えているべき設定があると思われる記事を見つけた為対応をします。  
実施したコマンド  
ポートの許可設定（全てルート権限sudoで実施）  
ufw allow 22  ←SSH  
ufw allow 80  ←Webアクセス（http）  
ufw allow 443  ←Webアクセス（https）  

ファイアウォールの有効化  
sudo ufw enable  

無事、有効化になっていることを確認。  
この課題の最初で詰まった、ネットワーク接続が上手くいかなかったのは  
この許可の設定が出来ていなかったからだと理解することが出来た。  

参考にしたwebサイト(https://blog.apar.jp/linux/14381/#google_vignette)
